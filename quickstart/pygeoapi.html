

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>6.5. Using pygeoapi to publish data to Geoconnex &#8212; Guidebook</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'quickstart/pygeoapi';</script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.6. Mint Persistent Identifiers" href="mintpids.html" />
    <link rel="prev" title="6.4. Data preparation" href="dataprep.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>


  <div class="bd-header-announcement container-fluid bd-header-announcement">
    <div class="bd-header-announcement__content">Under Construction</div>
  </div>

  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
    
    
      
    
    
    <img src="../_static/geoconnex-logo.png" class="logo__image only-light" alt="Logo image"/>
    <script>document.write(`<img src="../_static/geoconnex-logo.png" class="logo__image only-dark" alt="Logo image"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    The geoconnex.us guidebook
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../principles/genprin.html">General Principles</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../principles/hydrofeatures.html">Real-World Features</a></li>

<li class="toctree-l2"><a class="reference internal" href="../principles/pids.html">Persistent Identifiers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../principles/lc.html">Landing Pages</a></li>
<li class="toctree-l2"><a class="reference internal" href="../principles/jsonld.html">JSON-LD</a></li>

</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../community/community.html">Community</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Discover and Use graph.geoconnex.us data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../content/intro.html">What is in graph.geoconnex.us?</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">How to Contribute</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../contributing/intro.html">1. Contributing to the geoconnex.us knowledge graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/structured-data.html">2. Publishing structured, linked-data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/pids.html">3. Registering Persistent Identifiers (PIDs)</a></li>

<li class="toctree-l1"><a class="reference internal" href="../contributing/nldi.html">5. Contributing to the Network-Linked Data Index</a></li>
<li class="toctree-l1 current active has-children"><a class="reference internal" href="intro.html">6. QUICKSTART</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="idscheme.html">6.3. Identification Scheme</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataprep.html">6.4. Data preparation</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">6.5. Using pygeoapi to publish data to Geoconnex</a></li>
<li class="toctree-l2"><a class="reference internal" href="mintpids.html">6.6. Mint Persistent Identifiers</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Appendix</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../templates/intro-full.html">Templates</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../templates/sw.html">Surface water monitoring locations</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../templates/intro-blocks.html">JSON-LD block guidance</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-4"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../templates/context.html">Context</a></li>
<li class="toctree-l2"><a class="reference internal" href="../templates/hydroaddress.html">Hydrologic Addresses</a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/internetofwater/docs.geoconnex.us" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/internetofwater/docs.geoconnex.us/issues/new?title=Issue%20on%20page%20%2Fquickstart/pygeoapi.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/quickstart/pygeoapi.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Using pygeoapi to publish data to Geoconnex</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started-with-pygeoapi-and-docker">6.5.1. Getting started with pygeoapi and docker</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-data">6.5.1.1. Example data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deploying-locally">6.5.1.2. Deploying locally</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quickstart">6.5.1.3. Quickstart</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extending-the-demonstration">6.5.1.4. Extending the demonstration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#persistent-identifiers">6.5.1.5. Persistent Identifiers,</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="using-pygeoapi-to-publish-data-to-geoconnex">
<h1><span class="section-number">6.5. </span>Using pygeoapi to publish data to Geoconnex<a class="headerlink" href="#using-pygeoapi-to-publish-data-to-geoconnex" title="Permalink to this heading">#</a></h1>
<p>This repository is a demonstration and explanation for how to use <a class="reference external" href="https://pygeoapi.io">pygeoapi</a> to publish <a class="reference external" href="https://docs.ogc.org/per/20-067.html#landingContent">landing content for individual features</a> within geospatial datasets suitable for harvesting by the <a class="reference external" href="https://docs.geoconnex.us/principles/genprin.html">geoconnex.us</a> system. Geoconnex relies on <a class="reference external" href="https://json-ld.org/">JSON-LD</a> to output standardized data structures across disparate data sources and providers.</p>
<section id="getting-started-with-pygeoapi-and-docker">
<h2><span class="section-number">6.5.1. </span>Getting started with pygeoapi and docker<a class="headerlink" href="#getting-started-with-pygeoapi-and-docker" title="Permalink to this heading">#</a></h2>
<p>pygeoapi is a general open-source geospatial web server that implements several OGC-API standards. We leverage the <a class="reference external" href="https://ogcapi.ogc.org/features/">OGC-API Features</a> standard, which gives each individual feature within a geospatial vector dataset a unique URL with an associated HTML landing page, a GeoJSON response, and a JSON-LD response. In addition to the <a class="reference external" href="https://docs.pygeoapi.io/en/latest/data-publishing/ogcapi-features.html">feature providers</a> in pygeoapi core, the <a class="reference external" href="https://github.com/internetofwater/pygeoapi">internetofwater/pygeoapi</a> fork includes feature providers for the ESRI FeatureServer, the CKAN Data API, and the SODA API. It also includes modifications that enable the injection of custom templated JSON-LD into the script headers of the HTML pages. Both the HTML pages and JSON-LD responses are generated using jinja templates.</p>
<p>This demonstration uses <a class="reference external" href="https://www.docker.com/">Docker</a> to deploy pygeoapi with landing pages generated for data from the following sources:</p>
<ol class="arabic simple">
<li><p><strong>CSV Provider:</strong> A (local or periodically downloaded) csv file with latitude and longitude</p></li>
<li><p><strong>GeoJSON Provider:</strong> A (local or periodically downloaded) geojson file</p></li>
<li><p><strong>SQLiteGPKG Provider:</strong> A (local or periodically downloaded) geopackage file</p></li>
<li><p><strong>ESRI Provider:</strong> An ESRI FeatureServer or MapServer endpoint</p></li>
<li><p><strong>CKAN Provider:</strong> A CKAN Data API endpoint</p></li>
</ol>
<section id="example-data">
<h3><span class="section-number">6.5.1.1. </span>Example data<a class="headerlink" href="#example-data" title="Permalink to this heading">#</a></h3>
<p>For our example data, we are using the California Department of Water Resources (DWR) Groundwater Sustainability Plan (GSP) Monitoring <a class="reference external" href="https://data.ca.gov/dataset/gsp-monitoring-data">dataset</a>, and in particular, its “Existing Sites” feature collection.</p>
<ul class="simple">
<li><p>CSV file: <a class="github reference external" href="https://github.com/cgs-earth/pygeoapi-geoconnex-examples/blob/main/data/data.csv">cgs-earth/pygeoapi-geoconnex-examples</a></p></li>
<li><p>GeoJSON file: <a class="github reference external" href="https://github.com/cgs-earth/pygeoapi-geoconnex-examples/blob/main/data/data.geojson">cgs-earth/pygeoapi-geoconnex-examples</a></p></li>
<li><p>Geopackage file: <a class="github reference external" href="https://github.com/cgs-earth/pygeoapi-geoconnex-examples/blob/main/data/data.gpkg">cgs-earth/pygeoapi-geoconnex-examples</a></p></li>
<li><p>ESRI feature service: <a class="reference external" href="https://services.arcgis.com/aa38u6OgfNoCkTJ6/ArcGIS/rest/services/GSP_Monitoring_Data/FeatureServer/0">https://services.arcgis.com/aa38u6OgfNoCkTJ6/ArcGIS/rest/services/GSP_Monitoring_Data/FeatureServer/0</a></p></li>
<li><p>CKAN API endpoint: <a class="reference external" href="https://data.ca.gov/api/3/action/datastore_search?resource_id=72612518-e45b-4900-9cab-72b8de09c57d">https://data.ca.gov/api/3/action/datastore_search?resource_id=72612518-e45b-4900-9cab-72b8de09c57d</a></p></li>
</ul>
</section>
<section id="deploying-locally">
<h3><span class="section-number">6.5.1.2. </span>Deploying locally<a class="headerlink" href="#deploying-locally" title="Permalink to this heading">#</a></h3>
<p>pygeoapi can be deployed from a Dockerfile, building an image with data included as a layer, or with docker compose and volume binding. The only pre-requisite to deploy pygeoapi is a valid pygeoapi configurtion file, with blocks for each feature collection. The only pre-requsite to publish data to geoconnex is a valid JSON-LD object and a PID redirect in geoconnex namespace.</p>
<p>As such, the only requirements to publish data to crawlable by geoconnex is a valid pygeoapi configuration file with a correct JSON-LD feature template. This repository has been setup to satisfy both of these prerequisites out of the box.</p>
<p>The easiest way to deploy this demonstration is with docker-compose. The <a class="reference external" href="https://github.com/cgs-earth/pygeoapi-geoconnex-examples/blob/main/docker-compose.yml">docker-compose file</a> binds the data directory of local files, the <a class="reference external" href="https://github.com/cgs-earth/pygeoapi-geoconnex-examples/blob/main/pygeoapi.config.yml">pygeoapi configuration file</a>, and the preconfigured <a class="reference external" href="https://github.com/cgs-earth/pygeoapi-geoconnex-examples/blob/main/jsonld/hydrologic-location.jsonld">JSON-LD template</a> into the pygeoapi docker image.</p>
</section>
<section id="quickstart">
<h3><span class="section-number">6.5.1.3. </span>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Clone this repository on your machine.</p></li>
</ol>
<!-- -->
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/cgs-earth/pygeoapi-geoconnex-examples.git
cd pygeoapi-geoconnex-examples
</pre></div>
</div>
<ol class="arabic simple" start="2">
<li><p>Deploy the demonstration (make sure port 5000 is available)</p></li>
</ol>
<!-- -->
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>docker compose up
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Explore the OGC-API feature collections at <code class="docutils literal notranslate"><span class="pre">http://localhost:5000/collections</span></code></p></li>
</ol>
</section>
<section id="extending-the-demonstration">
<h3><span class="section-number">6.5.1.4. </span>Extending the demonstration<a class="headerlink" href="#extending-the-demonstration" title="Permalink to this heading">#</a></h3>
<p>From here, using pygeoapi to create HTML landing pages for your data should feel within reach.</p>
<p>The process is similar to the steps described in the quickstart, except with an additional requirement to setup your own configurations. After you decide the format for your data source, create a pygeoapi configuration file with metadata specific to your organization and a resource provider configured for your data. Then create a JSON-LD jinja template that outputs your data in a structured and standarized way. Once you have your data, your configuration file, and JSON-LD templates, deployment is not that dissimilar from the steps described in the quickstart.</p>
</section>
<section id="persistent-identifiers">
<h3><span class="section-number">6.5.1.5. </span>Persistent Identifiers,<a class="headerlink" href="#persistent-identifiers" title="Permalink to this heading">#</a></h3>
<p>As you explore the feature collections, notice the individual feature HTML resources (e.g. <a class="reference external" href="http://localhost:5000/collections/demo-ckan/items/31">http://localhost:5000/collections/demo-ckan/items/31</a>) and their json-ld versions (e.g. <a class="reference external" href="http://localhost:5000/collections/demo-ckan/items/31?f=jsonld">http://localhost:5000/collections/demo-ckan/items/31?f=jsonld</a>).</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;@context&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;schema&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://schema.org/&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;skos&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://www.w3.org/2004/02/skos/core#&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;hyf&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://www.opengis.net/def/schema/hy_features/hyf/&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;schema:name&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;gsp&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://www.opengis.net/ont/geosparql#&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;sameAs&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;schema:sameAs&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;related&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;skos:related&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;schema:description&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;image&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;@id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;schema:image&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;@type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;@id&quot;</span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;@id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://localhost:5000/collections/demo-ckan/items/31&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;@type&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="s2">&quot;https://www.opengis.net/def/schema/hy_features/hyf/HY_HydrometricFeature&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="s2">&quot;https://www.opengis.net/def/schema/hy_features/hyf/HY_HydroLocation&quot;</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;DWR at Gravelly Ford Canal&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;description&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;Surveying/Benchmark Sites at DWR at Gravelly Ford Canal&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;schema:provider&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SJRRP&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;hyf:HY_HydroLocationType&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;hydrometricStation&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;sosa:isFeatureOfInterestOf&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;schema:url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://www.restoresjr.net/science/subsidence-monitoring/&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;@type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sosa:ObservationCollection&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;schema:format&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">            </span><span class="s2">&quot;application/json&quot;</span>
<span class="w">        </span><span class="p">]</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;schema:geoWithin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;https://geoconnex.us/ref/states/06&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;geo&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;@type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;schema:GeoCoordinates&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;schema:longitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">-120.169</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;schema:latitude&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">36.8078</span>
<span class="w">    </span><span class="p">},</span>
<span class="w">    </span><span class="nt">&quot;gsp:hasGeometry&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;@type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://www.opengis.net/ont/sf#Point&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;gsp:asWKT&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;@type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;http://www.opengis.net/ont/geosparql#wktLiteral&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;@value&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;POINT (-120.169 36.8078)&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Notice how <code class="docutils literal notranslate"><span class="pre">&quot;&#64;id&quot;</span></code> is the URL for the API call. This can be configured to be an exteral URI instead, such as those <a class="reference external" href="https://docs.geoconnex.us/contributing/pids.html">minted with geoconnex.us</a>. You can then add these identifiers as a field in your data, whether in a local file or at an ESRI or CKAN api endpoint, and then specify this field as the <code class="docutils literal notranslate"><span class="pre">uri_field:</span></code> in the pygeoapi configuration yml file in the <code class="docutils literal notranslate"><span class="pre">providers:</span></code> block, like so:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="w">    </span><span class="nt">demo-ckan</span><span class="p">:</span>
<span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">collection</span>
<span class="w">        </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">geoconnex landing page demo (CKAN web service)</span>
<span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Demonstration Geoconnex Landing Pages (from CKAN REST service source)</span>
<span class="w">        </span><span class="nt">keywords</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Existing Sites</span>
<span class="w">        </span><span class="nt">template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">jsonld/hydrologic-location.jsonld</span>
<span class="w">        </span><span class="nt">links</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">application/html</span>
<span class="w">              </span><span class="nt">rel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">canonical</span>
<span class="w">              </span><span class="nt">title</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">data source</span>
<span class="w">              </span><span class="nt">href</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://data.ca.gov/dataset/gsp-monitoring-data/resource/72612518-e45b-4900-9cab-72b8de09c57d</span>
<span class="w">              </span><span class="nt">hreflang</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">en-US</span>
<span class="w">        </span><span class="nt">extents</span><span class="p">:</span>
<span class="w">            </span><span class="nt">spatial</span><span class="p">:</span>
<span class="w">                </span><span class="nt">bbox</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">-170</span><span class="p p-Indicator">,</span><span class="nv">15</span><span class="p p-Indicator">,</span><span class="nv">-51</span><span class="p p-Indicator">,</span><span class="nv">72</span><span class="p p-Indicator">]</span>
<span class="w">                </span><span class="nt">crs</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">http://www.opengis.net/def/crs/OGC/1.3/CRS84</span>
<span class="w">            </span><span class="nt">temporal</span><span class="p">:</span>
<span class="w">                </span><span class="nt">begin</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">                </span><span class="nt">end</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">null</span>
<span class="w">        </span><span class="nt">providers</span><span class="p">:</span>
<span class="w">            </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">feature</span>
<span class="w">              </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">CKAN</span>
<span class="w">              </span><span class="nt">data</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://data.ca.gov/api/3/action/datastore_search?resource_id=72612518-e45b-4900-9cab-72b8de09c57d</span>
<span class="w">              </span><span class="nt">id_field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EXISTING_INFO_ID</span>
<span class="w">              </span><span class="nt">uri_field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">EXAMPLE_URI_FIELD_RENAME_AS_NECESSARY</span>
<span class="w">              </span><span class="nt">x_field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LONGITUDE</span>
<span class="w">              </span><span class="nt">y_field</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">LATITUDE</span>
</pre></div>
</div>
</section>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./quickstart"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="dataprep.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">6.4. </span>Data preparation</p>
      </div>
    </a>
    <a class="right-next"
       href="mintpids.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">6.6. </span>Mint Persistent Identifiers</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-started-with-pygeoapi-and-docker">6.5.1. Getting started with pygeoapi and docker</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#example-data">6.5.1.1. Example data</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#deploying-locally">6.5.1.2. Deploying locally</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#quickstart">6.5.1.3. Quickstart</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#extending-the-demonstration">6.5.1.4. Extending the demonstration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#persistent-identifiers">6.5.1.5. Persistent Identifiers,</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By the Internet of Water Coalition
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <div class="container-lg mt-3">
  <div class="row">
    <div class="col-xl-3">
        <div class="footerImages">
          <a href="http://cgs.earth/"><img src="../../../_static/img/cgs-logo2.png" height="70" alt="CGS" style="float:center""></a>
          <a href="https://nicholasinstitute.duke.edu/"><img src="../../../_static/img/duke-logo.png" height="70" alt="Duke logo" style="float:center""></a>
          <a href="https://usgs.gov"><img src="../../../_static/img/usgs.png" height="70" alt="USGS logo" style="float:center""></a>
        </div>
    </div>
    <div class="col-xl-6 d-flex">
      <div class="container">
        <div class="row">
          <div class="col-6 d-flex" style="justify-content:center">
            <ul>
              <li><a href="mailto:konda@lincolninst.edu"> Contact us </a></li>
              <li><a href="http://cgs.earth" target="_blank"> Center for Geospatial Solutions </a> </li>
              <li><a href="https://internetofwater.org" target="_blank"> Internet of Water Coalition </a> </li>
            </ul>
          </div>
          <div class="col-6 d-flex" style="justify-content:center">
            <ul>
              <li> <a href="https://faircookbook.elixir-europe.org/content/recipes/boilerplate/people.html  "> Contributors </a> </li> </li>
              <li> <a href="https://faircookbook.elixir-europe.org/content/recipes/help.html"> How to contribute </a> </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xl-3">
       <a href="https://internetofwater.org/" target="_blank"><img src="../../../_static/img/iow-project.png" height="200" width="138" alt="iow logo" style="float:center""></a>
    </div>
  </div>
</div>
<div class="row_footer my-3">
  The geoconnex.us Guidebook and Knowledge Graph are licensed under the <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank"><img src="http://i.creativecommons.org/p/zero/1.0/88x31.png" style="border-style: none;" alt="CC0" />Creative Commons Zero 1.0</a> (CC0) license. This material is based upon work supported by the U.S. Geological Survey under Grant Nos. G21AP10607 and G21AC10732
</div>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>